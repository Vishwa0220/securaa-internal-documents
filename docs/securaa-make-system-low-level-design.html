<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Securaa Make System - Low Level Design - Securaa Platform Documentation</title>
    <link rel="stylesheet" href="assets/css/documentation.css">
</head>
<body>
    <header class="main-header">
        <h1>Securaa Platform Documentation</h1>
        <p>Comprehensive documentation for Securaa security platform services</p>
    </header>
    
    <nav class="documentation-nav">
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="securaa-playbook-high-level-design.html">Securaa Playbook High Level Design</a></li>
            <li><a href="securaa-playbook-low-level-design.html">Securaa Playbook Low Level Design</a></li>
            <li><a href="optimization-guide.html">Optimization Guide</a></li>
            <li><a href="securaa-siem-high-level-design.html">Securaa SIEM High Level Design</a></li>
            <li><a href="securaa-siem-low-level-design.html">Securaa SIEM Low Level Design</a></li>
            <li><a href="securaa-platform-high-level-design.html">Securaa Platform</a></li>
            <li><a href="process-manager-high-level-design.html">Process Manager High Level Design</a></li>
            <li><a href="process-manager-low-level-design.html">Process Manager Low Level Design</a></li>
            <li><a href="securaa-user-high-level-design.html">Securaa User High Level Design</a></li>
            <li><a href="securaa-user-low-level-design.html">Securaa User Low Level Design</a></li>
            <li><a href="securaa-custom-services-high-level-design.html">Securaa Custom Services High Level Design</a></li>
            <li><a href="securaa-custom-services-low-level-design.html">Securaa Custom Services Low Level Design</a></li>
            <li><a href="securaa-custom-utils-high-level-design.html">Securaa Custom Utils High Level Design</a></li>
            <li><a href="securaa-custom-utils-low-level-design.html">Securaa Custom Utils Low Level Design</a></li>
            <li><a href="securaa-make-system-high-level-design.html">Securaa Make System High Level Design</a></li>
            <li><a href="securaa-make-system-low-level-design.html" class="active">Securaa Make System Low Level Design</a></li>
        </ul>
    </nav>
    
    <main class="main-content">
        <h1>Securaa Make System - Low Level Design</h1>
        
        <section id="makefile-patterns">
            <h2>Common Makefile Patterns</h2>
                
                <h3>Standard Go Service Makefile Pattern</h3>
                <p>All individual service Makefiles follow this standardized pattern:</p>
                
                <pre><code># Environment Variables from .env
TARGET ?= $(shell . ./.env && echo $$TARGET)
GIT_REF ?= $(shell . ./.env && echo $$GIT_REF)
GIT_BRANCH ?= $(shell . ./.env && echo $$GIT_BRANCH)
INFO ?= $(shell . ./.env && echo $$INFO)
BUILD_VERSION ?= $(shell . ./.env && echo $$BUILD_VERSION)
BUILD_NUMBER ?= $(shell . ./.env && echo $$BUILD_NUMBER)
RUNTIME_DOCKER_IMAGE ?= $(shell . ./.env && echo $$RUNTIME_DOCKER_IMAGE)

# Build Configuration
BUILD_ENV ?= CGO_ENABLED=0
PACKAGES = $$(go list ./... | grep -v /vendor/)
BUILD_FLAGS ?= -ldflags "-X main.GitRef=$(GIT_REF) ..."

# Standard Targets
build: builddir
    $(BUILD_ENV) go build -mod vendor $(BUILD_FLAGS) -o build/$(TARGET)

vendor:
    GO111MODULE=on go mod vendor

clean:
    rm -rf build/*

# Docker Targets
image_ecr: builddir
    DOCKER_BUILDKIT=1 docker build --pull -t $(RUNTIME_DOCKER_IMAGE_ECR):latest ...</code></pre>

                <h3>Aggregation Makefile Pattern</h3>
                <p>Top-level Makefiles that coordinate multiple services:</p>
                
                <pre><code>TARGETS:= service1 service2 service3 ...
BUILD_LOG:= build.log
EXPORT_DIR:= /opt/zona/build/component_name

all:
    for DIR in $(TARGETS); do \
        $(MAKE) vendor --directory=$$DIR; \
        $(MAKE) build --directory=$$DIR; \
    done

clean:
    for DIR in $(TARGETS); do \
        $(MAKE) clean --directory=$$DIR; \
    done

export: builddir
    for DIR in $(TARGETS); do \
        cp -f $$DIR/build/* $(EXPORT_DIR)/ >> $(BUILD_LOG) 2>&1; \
    done</code></pre>

                <h3>Advanced Optimization Techniques</h3>
                <pre><code># High-performance Makefile configuration

# Parallel processing configuration
NPROC := $(shell nproc)
PARALLEL_JOBS := $(shell echo $$(($(NPROC) * 2)))
export MAKEFLAGS += -j$(PARALLEL_JOBS)

# Go build optimization
export CGO_ENABLED=0
export GOCACHE=/tmp/go-build-cache
export GOMODCACHE=/tmp/go-mod-cache
export GOMAXPROCS=$(NPROC)

# Compiler optimizations
BUILD_FLAGS := -ldflags="-s -w -X main.Version=$(BUILD_VERSION)" \
               -trimpath \
               -buildmode=exe \
               -compiler=gc

# Docker optimization
DOCKER_BUILDKIT := 1
BUILDKIT_PROGRESS := plain

# Advanced targets
build-optimized: export GOOS=linux
build-optimized: export GOARCH=amd64
build-optimized: builddir
	go build $(BUILD_FLAGS) -o build/$(TARGET)

# Parallel component build with dependency management
all-parallel:
	@echo "Building with $(PARALLEL_JOBS) parallel jobs"
	$(MAKE) -j$(PARALLEL_JOBS) $(TARGETS)</code></pre>
            </section>

            <section id="environment">
                <h2>Environment Configuration</h2>
                
                <h3>.env File Structure</h3>
                <p>Each service directory contains a <code>.env</code> file with standard configuration:</p>
                
                <pre><code>TARGET=service_name
GIT_REF=git_commit_hash
GIT_BRANCH=branch_name
INFO="Service Description"
BUILD_VERSION=6.1.0
BUILD_NUMBER=build_number
RUNTIME_DOCKER_IMAGE=registry/image_name
RUNTIME_DOCKER_IMAGE_ECR=ecr_registry/image_name
RUNTIME_DOCKER_IMAGE_LOCAL=local_registry/image_name</code></pre>

                <h3>Environment-Specific Configuration</h3>
                <table>
                    <tr>
                        <th>Environment</th>
                        <th>Build Type</th>
                        <th>Optimization</th>
                        <th>Security</th>
                        <th>Registry</th>
                    </tr>
                    <tr>
                        <td>Development</td>
                        <td>Debug</td>
                        <td>Fast build</td>
                        <td>Basic</td>
                        <td>Local registry</td>
                    </tr>
                    <tr>
                        <td>Testing</td>
                        <td>Debug</td>
                        <td>Parallel</td>
                        <td>Standard</td>
                        <td>Test registry</td>
                    </tr>
                    <tr>
                        <td>Staging</td>
                        <td>Release</td>
                        <td>Optimized</td>
                        <td>Enhanced</td>
                        <td>Staging registry</td>
                    </tr>
                    <tr>
                        <td>Production</td>
                        <td>Release</td>
                        <td>Maximum</td>
                        <td>Hardened</td>
                        <td>Production ECR</td>
                    </tr>
                </table>

                <h3>Configuration Management Examples</h3>
                
                <h4>Development Environment</h4>
                <pre><code># config/environments/development.env
export BUILD_TYPE=debug
export CGO_ENABLED=1
export OPTIMIZATION_LEVEL=0
export PARALLEL_JOBS=4
export REGISTRY_URL=localhost:5000
export SECURITY_LEVEL=basic
export ENABLE_CACHE=true
export ENABLE_TESTS=true</code></pre>

                <h4>Production Environment</h4>
                <pre><code># config/environments/production.env  
export BUILD_TYPE=release
export CGO_ENABLED=0
export OPTIMIZATION_LEVEL=3
export PARALLEL_JOBS=16
export REGISTRY_URL=123456789.dkr.ecr.us-east-1.amazonaws.com
export SECURITY_LEVEL=hardened
export ENABLE_CACHE=true
export ENABLE_TESTS=true
export ENABLE_SIGNING=true
export ENABLE_ATTESTATION=true</code></pre>

                <h4>Security Environment</h4>
                <pre><code># config/environments/security.env
export BUILD_TYPE=hardened
export CGO_ENABLED=0
export OPTIMIZATION_LEVEL=3
export PARALLEL_JOBS=8
export REGISTRY_URL=secure-registry.company.com
export SECURITY_LEVEL=maximum
export ENABLE_CACHE=false
export ENABLE_TESTS=true
export ENABLE_SIGNING=true
export ENABLE_ATTESTATION=true
export ENABLE_PROVENANCE=true
export ENABLE_SBOM=true</code></pre>
            </section>

            <section id="build-targets">
                <h2>Build Targets Reference</h2>
                
                <h3>Common Targets (All Services)</h3>
                <table>
                    <tr>
                        <th>Target</th>
                        <th>Purpose</th>
                        <th>Description</th>
                    </tr>
                    <tr>
                        <td><code>build</code></td>
                        <td>Compile</td>
                        <td>Builds the Go binary with vendor dependencies</td>
                    </tr>
                    <tr>
                        <td><code>vendor</code></td>
                        <td>Dependencies</td>
                        <td>Downloads and vendors Go module dependencies</td>
                    </tr>
                    <tr>
                        <td><code>clean</code></td>
                        <td>Cleanup</td>
                        <td>Removes build artifacts</td>
                    </tr>
                    <tr>
                        <td><code>builddir</code></td>
                        <td>Setup</td>
                        <td>Creates build directory</td>
                    </tr>
                    <tr>
                        <td><code>vet</code></td>
                        <td>Code Analysis</td>
                        <td>Runs Go vet for code analysis</td>
                    </tr>
                    <tr>
                        <td><code>lint</code></td>
                        <td>Linting</td>
                        <td>Runs golangci-lint</td>
                    </tr>
                    <tr>
                        <td><code>fmt</code></td>
                        <td>Formatting</td>
                        <td>Formats Go code</td>
                    </tr>
                    <tr>
                        <td><code>update</code></td>
                        <td>Update Deps</td>
                        <td>Updates Go dependencies</td>
                    </tr>
                </table>

                <h3>Docker Targets</h3>
                <table>
                    <tr>
                        <th>Target</th>
                        <th>Purpose</th>
                        <th>Description</th>
                    </tr>
                    <tr>
                        <td><code>builder</code></td>
                        <td>Build Env</td>
                        <td>Creates builder Docker image</td>
                    </tr>
                    <tr>
                        <td><code>image</code></td>
                        <td>Local Image</td>
                        <td>Builds local Docker image</td>
                    </tr>
                    <tr>
                        <td><code>image_ecr</code></td>
                        <td>ECR Image</td>
                        <td>Builds ECR-tagged Docker image</td>
                    </tr>
                    <tr>
                        <td><code>image_local</code></td>
                        <td>Local Tagged</td>
                        <td>Builds locally-tagged Docker image</td>
                    </tr>
                    <tr>
                        <td><code>push</code></td>
                        <td>Push Image</td>
                        <td>Pushes image to registry</td>
                    </tr>
                    <tr>
                        <td><code>push_ecr</code></td>
                        <td>Push ECR</td>
                        <td>Pushes image to ECR</td>
                    </tr>
                </table>

                <h3>Package Management Targets (build_securaa/pkg)</h3>
                <table>
                    <tr>
                        <th>Target</th>
                        <th>Purpose</th>
                        <th>Description</th>
                    </tr>
                    <tr>
                        <td><code>rpm</code></td>
                        <td>Default Package</td>
                        <td>Builds complete MSSP RPM</td>
                    </tr>
                    <tr>
                        <td><code>rpm_mssp_complete</code></td>
                        <td>Complete Package</td>
                        <td>Full MSSP installation package</td>
                    </tr>
                    <tr>
                        <td><code>rpm_mssp_core_services_ui</code></td>
                        <td>Core Services</td>
                        <td>Core services and UI package</td>
                    </tr>
                    <tr>
                        <td><code>rpm_mssp_core_db</code></td>
                        <td>Database</td>
                        <td>Database components package</td>
                    </tr>
                    <tr>
                        <td><code>rpm_mssp_ml</code></td>
                        <td>ML Package</td>
                        <td>Machine learning components</td>
                    </tr>
                    <tr>
                        <td><code>rpm_arbiter</code></td>
                        <td>Arbiter</td>
                        <td>MongoDB arbiter package</td>
                    </tr>
                    <tr>
                        <td><code>rpm_worker_node</code></td>
                        <td>Worker Node</td>
                        <td>Worker node package</td>
                    </tr>
                </table>
            </section>

            <section id="docker-integration">
                <h2>Docker Integration</h2>
                
                <h3>Multi-Stage Docker Build</h3>
                <p>Services use optimized multi-stage Docker builds for security and performance:</p>
                
                <pre><code># Dockerfile example
# Stage 1: Builder
FROM golang:1.20-alpine AS builder
WORKDIR /app
COPY go.mod go.sum ./
RUN go mod download
COPY . .
RUN CGO_ENABLED=0 GOOS=linux go build \
    -ldflags "-s -w -X main.Version=${BUILD_VERSION}" \
    -o /app/${TARGET}

# Stage 2: Runtime  
FROM alpine:3.18
RUN apk --no-cache add ca-certificates
WORKDIR /root/
COPY --from=builder /app/${TARGET} .
COPY --from=builder /app/config/ ./config/
EXPOSE 8080
USER nobody
CMD ["./${TARGET}"]</code></pre>

                <h3>Docker Build Arguments</h3>
                <p>Docker builds accept these build arguments:</p>
                <ul>
                    <li><code>TARGET</code> - Service name</li>
                    <li><code>GIT_REF</code> - Git commit reference</li>
                    <li><code>GIT_BRANCH</code> - Git branch name</li>
                    <li><code>BUILD_VERSION</code> - Version number</li>
                    <li><code>BUILD_NUMBER</code> - Build number</li>
                    <li><code>PARALLEL_JOBS</code> - Number of parallel build jobs</li>
                </ul>

                <h3>Registry Configuration</h3>
                <p>Three registry types are supported:</p>
                
                <table>
                    <tr>
                        <th>Registry Type</th>
                        <th>Purpose</th>
                        <th>Configuration</th>
                    </tr>
                    <tr>
                        <td>Local</td>
                        <td>Development</td>
                        <td>localhost:5000</td>
                    </tr>
                    <tr>
                        <td>ECR</td>
                        <td>AWS Production</td>
                        <td>123456789.dkr.ecr.region.amazonaws.com</td>
                    </tr>
                    <tr>
                        <td>Custom</td>
                        <td>Enterprise</td>
                        <td>harbor.company.com, quay.io</td>
                    </tr>
                </table>

                <h3>Docker Build Optimization</h3>
                <ul>
                    <li><strong>BuildKit</strong>: <code>DOCKER_BUILDKIT=1</code> for improved performance</li>
                    <li><strong>Layer Caching</strong>: Dependencies cached in separate layers</li>
                    <li><strong>Multi-platform</strong>: Support for linux/amd64, linux/arm64</li>
                    <li><strong>Parallel Downloads</strong>: Concurrent layer downloads</li>
                    <li><strong>Build Context</strong>: Optimized with .dockerignore</li>
                    <li><strong>Minimal Runtime</strong>: Alpine-based images</li>
                    <li><strong>Security</strong>: Non-root user execution</li>
                </ul>
            </section>

            <section id="security">
                <h2>Security Considerations</h2>
                
                <h3>Supply Chain Security</h3>
                
                <h4>Dependency Verification</h4>
                <ul>
                    <li><strong>go.sum verification</strong>: Cryptographic checksums for all dependencies</li>
                    <li><strong>Module proxy verification</strong>: GOPROXY=proxy.golang.org</li>
                    <li><strong>GOSUMDB verification</strong>: Tamper detection</li>
                    <li><strong>Vulnerability scanning</strong>: govulncheck, Nancy, Snyk</li>
                    <li><strong>License compliance</strong>: FOSSA, Blackduck scanning</li>
                </ul>

                <h4>Build Environment Security</h4>
                <ul>
                    <li><strong>Isolated builds</strong>: Ephemeral build containers</li>
                    <li><strong>No persistent state</strong>: Clean builds every time</li>
                    <li><strong>Network segmentation</strong>: Limited network access</li>
                    <li><strong>Resource limits</strong>: CPU and memory quotas</li>
                    <li><strong>Build attestation</strong>: SLSA compliance</li>
                    <li><strong>Provenance tracking</strong>: In-toto metadata</li>
                </ul>

                <h3>Security Makefile Targets</h3>
                <pre><code># Security-focused build targets

# Comprehensive security check
security-all: security-deps security-code security-container security-package
	@echo "‚úÖ All security checks completed"

# Dependency security verification
security-deps:
	@echo "üîç Checking dependencies for vulnerabilities..."
	go list -json -m all | nancy sleuth
	govulncheck -json ./... | jq '.'
	go mod verify
	go mod tidy -diff

# Code security analysis
security-code:
	@echo "üîç Running static security analysis..."
	gosec -fmt json -out gosec-report.json ./...
	staticcheck -f json ./... > staticcheck-report.json
	golangci-lint run --out-format json --issues-exit-code=0 > golangci-report.json
	
# Secret detection
security-secrets:
	@echo "üîç Scanning for secrets..."
	trufflehog git file://. --json > trufflehog-report.json
	gitleaks detect --source . --report-format json --report-path gitleaks-report.json

# Container security scanning  
security-container:
	@echo "üîç Scanning container images..."
	trivy image --format json --output trivy-report.json $(RUNTIME_DOCKER_IMAGE):latest

# SBOM generation
security-sbom:
	@echo "üìã Generating Software Bill of Materials..."
	cyclonedx-gomod mod -json -output sbom.json
	syft packages . -o spdx-json > sbom-spdx.json</code></pre>

                <h3>Container Security</h3>
                
                <h4>Base Image Security</h4>
                <ul>
                    <li><strong>Distroless/Alpine</strong>: Minimal attack surface</li>
                    <li><strong>Regular updates</strong>: Automated security patches</li>
                    <li><strong>CVE scanning</strong>: Trivy/Clair integration</li>
                    <li><strong>Image signing</strong>: Cosign/Notary signatures</li>
                </ul>

                <h4>Runtime Security</h4>
                <ul>
                    <li><strong>Non-root user</strong>: USER nobody directive</li>
                    <li><strong>Read-only filesystem</strong>: Immutable containers</li>
                    <li><strong>Minimal capabilities</strong>: Reduced Linux capabilities</li>
                    <li><strong>Security contexts</strong>: Kubernetes security policies</li>
                    <li><strong>AppArmor/SELinux</strong>: Mandatory access controls</li>
                </ul>

                <h4>Registry Security</h4>
                <ul>
                    <li><strong>Private registry</strong>: RBAC access control</li>
                    <li><strong>Service accounts</strong>: Automated authentication</li>
                    <li><strong>Image policies</strong>: Admission controllers</li>
                    <li><strong>Content trust</strong>: Docker Content Trust</li>
                    <li><strong>Vulnerability thresholds</strong>: Policy enforcement</li>
                </ul>
            </section>

            <section id="cicd-integration">
                <h2>CI/CD Integration</h2>
                
                <h3>Pipeline Architecture</h3>
                <div class="mermaid">
graph LR
    subgraph "CI/CD Pipeline"
        SC[Source Control<br/>Git Webhook<br/>Branch Policy<br/>PR Approval]
        BS[Build System<br/>Make System<br/>Docker Build<br/>Package RPM]
        TS[Test Suite<br/>Unit Tests<br/>Integration Tests<br/>Security Scan]
        DP[Deploy Pipeline<br/>K8s Deploy<br/>Helm Charts<br/>Rollback Support]
    end
    
    SC --> BS
    BS --> TS
    TS --> DP
                </div>

                <h3>Jenkins Pipeline Example</h3>
                <pre><code>pipeline {
    agent any
    environment {
        REGISTRY = 'your-ecr-registry'
        BUILD_VERSION = "${env.BUILD_NUMBER}"
        GIT_REF = "${env.GIT_COMMIT}"
        GIT_BRANCH = "${env.GIT_BRANCH}"
    }
    stages {
        stage('Build Libraries') {
            parallel {
                stage('securaa') {
                    steps { 
                        sh '''
                            cd securaa
                            go mod vendor
                            go build ./...
                        '''
                    }
                }
                stage('securaa_lib') {
                    steps { 
                        sh '''
                            cd securaa_lib
                            go mod vendor
                            go build ./...
                        '''
                    }
                }
            }
        }
        stage('Build Services') {
            parallel {
                stage('zona_services') {
                    steps { 
                        sh '''
                            cd zona_services
                            make all
                            make export
                        '''
                    }
                }
                stage('zona_batch') {
                    steps { 
                        sh '''
                            cd zona_batch
                            make all
                            make export
                        '''
                    }
                }
            }
        }
        stage('Security & Test') {
            parallel {
                stage('Security Scan') {
                    steps { 
                        sh 'make security-scan'
                    }
                }
                stage('Unit Tests') {
                    steps { 
                        sh 'make test-all'
                    }
                }
            }
        }
        stage('Package & Deploy') {
            when { branch 'main' }
            steps {
                sh '''
                    cd build_securaa/pkg
                    make rpm_mssp_complete
                '''
            }
        }
    }
}</code></pre>
            </section>

            <section id="development-workflows">
                <h2>Development Workflows</h2>
                
                <h3>Building a Single Service</h3>
                <pre><code>cd /path/to/service
make vendor    # Download dependencies
make build     # Build binary
make clean     # Clean artifacts</code></pre>

                <h3>Building Component Group</h3>
                <pre><code>cd zona_services
make all       # Build all services
make export    # Copy to export directory
make clean     # Clean all services</code></pre>

                <h3>Docker Workflow</h3>
                <pre><code>make image_ecr    # Build ECR image
make push_ecr     # Push to ECR</code></pre>

                <h3>Package Building</h3>
                <pre><code>cd build_securaa/pkg
make rpm_mssp_complete     # Build complete package
make rpm_mssp_core_db      # Build database package</code></pre>

                <h3>Development Cycle Best Practices</h3>
                <ol>
                    <li><strong>Code Changes</strong>: Modify source code</li>
                    <li><strong>Vendor</strong>: <code>make vendor</code> (if dependencies changed)</li>
                    <li><strong>Build</strong>: <code>make build</code></li>
                    <li><strong>Test</strong>: Run unit tests</li>
                    <li><strong>Docker</strong>: <code>make image_local</code> (for containerized testing)</li>
                    <li><strong>Package</strong>: Build RPM for deployment testing</li>
                </ol>
            </section>

            <section id="monitoring">
                <h2>Monitoring and Observability</h2>
                
                <h3>Build Metrics Collection</h3>
                <pre><code># Build metrics targets
metrics-build:
	@echo "üìä Collecting build metrics..."
	@start_time=$$(date +%s); \
	$(MAKE) all; \
	end_time=$$(date +%s); \
	build_duration=$$((end_time - start_time)); \
	echo "Build completed in $$build_duration seconds" | \
	tee build-metrics.txt

# Performance profiling
profile-build:
	@echo "üìà Profiling build performance..."
	time -v $(MAKE) all 2>&1 | tee build-profile.txt
	du -sh build/ >> build-profile.txt
	df -h >> build-profile.txt</code></pre>

                <h3>Health Checks</h3>
                <pre><code># Health checks for built artifacts
health-check:
	@echo "üè• Running health checks..."
	@for binary in build/*; do \
		if [ -f "$$binary" ] && [ -x "$$binary" ]; then \
			echo "Checking $$binary..."; \
			file "$$binary"; \
			ldd "$$binary" 2>/dev/null || echo "Static binary"; \
			"$$binary" --version 2>/dev/null || echo "No version info"; \
		fi; \
	done</code></pre>

                <h3>Dependency Analysis</h3>
                <pre><code># Dependency analysis targets
analyze-deps:
	@echo "üîç Analyzing dependencies..."
	go mod graph > dependency-graph.txt
	go list -m -u all > dependency-updates.txt
	go mod why -m all > dependency-usage.txt</code></pre>
            </section>

            <section id="troubleshooting">
                <h2>Troubleshooting</h2>
                
                <h3>Common Issues and Solutions</h3>
                
                <h4>1. Dependency Issues</h4>
                <div class="problem-solution">
                    <div class="problem">
                        <strong>Problem:</strong> <code>vendor</code> directory missing or outdated
                    </div>
                    <div class="solution">
                        <strong>Solution:</strong>
                        <pre><code>make vendor</code></pre>
                    </div>
                </div>

                <div class="problem-solution">
                    <div class="problem">
                        <strong>Problem:</strong> Module not found errors
                    </div>
                    <div class="solution">
                        <strong>Solution:</strong>
                        <pre><code>go mod tidy
make vendor</code></pre>
                    </div>
                </div>

                <h4>2. Build Failures</h4>
                <div class="problem-solution">
                    <div class="problem">
                        <strong>Problem:</strong> CGO linking errors
                    </div>
                    <div class="solution">
                        <strong>Solution:</strong> Ensure CGO is disabled
                        <pre><code>export CGO_ENABLED=0
make build</code></pre>
                    </div>
                </div>

                <div class="problem-solution">
                    <div class="problem">
                        <strong>Problem:</strong> Missing environment variables
                    </div>
                    <div class="solution">
                        <strong>Solution:</strong> Check .env file
                        <pre><code>cat .env
source .env
make build</code></pre>
                    </div>
                </div>

                <h4>3. Docker Issues</h4>
                <div class="problem-solution">
                    <div class="problem">
                        <strong>Problem:</strong> Docker build context too large
                    </div>
                    <div class="solution">
                        <strong>Solution:</strong> Use .dockerignore
                        <pre><code>echo "vendor/" >> .dockerignore
echo "build/" >> .dockerignore</code></pre>
                    </div>
                </div>

                <div class="problem-solution">
                    <div class="problem">
                        <strong>Problem:</strong> Registry authentication
                    </div>
                    <div class="solution">
                        <strong>Solution:</strong> Login to registry
                        <pre><code>aws ecr get-login-password | docker login --username AWS --password-stdin &lt;registry&gt;</code></pre>
                    </div>
                </div>

                <h4>4. Package Building Issues</h4>
                <div class="problem-solution">
                    <div class="problem">
                        <strong>Problem:</strong> RPM build directory permissions
                    </div>
                    <div class="solution">
                        <strong>Solution:</strong> Set up rpmbuild directories
                        <pre><code>mkdir -p ~/rpmbuild/{SOURCES,SPECS,BUILD,SRPMS,RPMS}</code></pre>
                    </div>
                </div>

                <h3>Debugging Steps</h3>
                <ol>
                    <li><strong>Check Environment</strong>: Verify <code>.env</code> file contents</li>
                    <li><strong>Verify Dependencies</strong>: Ensure <code>vendor/</code> directory exists</li>
                    <li><strong>Check Disk Space</strong>: Ensure sufficient space for builds</li>
                    <li><strong>Test Individually</strong>: Build services one at a time</li>
                    <li><strong>Check Logs</strong>: Review <code>build.log</code> for detailed errors</li>
                    <li><strong>Clean and Retry</strong>: Use <code>make clean</code> and rebuild</li>
                </ol>

                <h3>Log Analysis</h3>
                <p>Build logs are written to <code>build.log</code> in component directories:</p>
                
                <pre><code># Check recent build output
tail -f build.log

# Search for specific errors
grep -i error build.log
grep -i fail build.log

# Analyze build performance
grep "real\|user\|sys" build.log</code></pre>

                <h3>Performance Optimization Tips</h3>
                <ul>
                    <li><strong>Parallel Builds</strong>: Use <code>make -j&lt;n&gt;</code> for parallel builds</li>
                    <li><strong>Build Caching</strong>: Leverage Docker build cache</li>
                    <li><strong>Incremental Builds</strong>: Only rebuild changed components</li>
                    <li><strong>Resource Allocation</strong>: Ensure adequate CPU/memory for builds</li>
                    <li><strong>Dependency Caching</strong>: Reuse <code>vendor/</code> directories when possible</li>
                    <li><strong>Clean Builds</strong>: Use <code>make clean</code> before important builds</li>
                </ul>

                <h3>Advanced Debugging</h3>
                <pre><code># Enable verbose output
export VERBOSE=1
make build

# Debug Makefile execution
make -d build

# Profile Go build
go build -x -v ./...

# Check binary dependencies
ldd build/service_name

# Verify binary integrity
file build/service_name
nm build/service_name | head -20</code></pre>
            </section>

            <section id="external-tools">
                <h2>External Tool Integrations</h2>
                
                <h3>SonarQube Integration</h3>
                <pre><code># sonar-project.properties
sonar.projectKey=securaa
sonar.projectName=SECURAA Platform
sonar.projectVersion=6.1.0
sonar.sources=.
sonar.exclusions=vendor/**,build/**
sonar.go.coverage.reportPaths=coverage.out

# Makefile target
sonar-scan:
	@echo "üîç Running SonarQube analysis..."
	sonar-scanner \
		-Dsonar.projectKey=securaa \
		-Dsonar.sources=. \
		-Dsonar.host.url=$(SONAR_URL) \
		-Dsonar.login=$(SONAR_TOKEN)</code></pre>

                <h3>Artifactory Integration</h3>
                <pre><code># Artifactory upload
artifactory-upload:
	@echo "üì§ Uploading to Artifactory..."
	jfrog rt upload "build/*" securaa-binaries/ \
		--build-name=securaa \
		--build-number=$(BUILD_NUMBER)</code></pre>

                <h3>Notification Systems</h3>
                <pre><code># Slack notifications
notify-slack:
	@echo "üì¢ Sending Slack notification..."
	curl -X POST -H 'Content-type: application/json' \
		--data '{"text":"üöÄ SECURAA build $(BUILD_VERSION) completed"}' \
		$(SLACK_WEBHOOK_URL)

# JIRA integration
jira-update:
	@echo "üé´ Updating JIRA tickets..."
	curl -X POST \
		-H "Content-Type: application/json" \
		-H "Authorization: Bearer $(JIRA_TOKEN)" \
		-d '{"body":"Build $(BUILD_VERSION) deployed to $(ENV)"}' \
		"$(JIRA_URL)/rest/api/3/issue/$(JIRA_ISSUE)/comment"</code></pre>
            </section>

            <section id="best-practices">
                <h2>Best Practices</h2>
                
                <h3>Dependency Management</h3>
                <ul>
                    <li>Always run <code>make vendor</code> after dependency changes</li>
                    <li>Use Go modules (<code>go.mod</code>) for dependency specification</li>
                    <li>Vendor dependencies for reproducible builds</li>
                    <li>Regularly update dependencies for security patches</li>
                    <li>Use <code>go mod tidy</code> to clean unused dependencies</li>
                </ul>

                <h3>Environment Configuration</h3>
                <ul>
                    <li>Maintain <code>.env</code> files for each service</li>
                    <li>Use consistent naming conventions</li>
                    <li>Version build information in binaries</li>
                    <li>Separate configuration for different environments</li>
                    <li>Validate configuration before builds</li>
                </ul>

                <h3>Build Optimization</h3>
                <ul>
                    <li>Use <code>CGO_ENABLED=0</code> for static binaries</li>
                    <li>Leverage build caching where possible</li>
                    <li>Use multi-stage Docker builds</li>
                    <li>Implement parallel builds for large projects</li>
                    <li>Optimize compiler flags for production builds</li>
                </ul>

                <h3>Security Best Practices</h3>
                <ul>
                    <li>Scan dependencies for vulnerabilities</li>
                    <li>Use minimal base images (Alpine, distroless)</li>
                    <li>Run containers as non-root users</li>
                    <li>Sign and verify container images</li>
                    <li>Implement build attestation and provenance</li>
                    <li>Regular security audits of the build pipeline</li>
                </ul>

                <h3>Version Control</h3>
                <ul>
                    <li>Tag releases appropriately</li>
                    <li>Include git information in builds</li>
                    <li>Maintain build traceability</li>
                    <li>Use semantic versioning</li>
                    <li>Document breaking changes</li>
                </ul>

                <h3>Clean Builds</h3>
                <ul>
                    <li>Run <code>make clean</code> before important builds</li>
                    <li>Clean export directories between builds</li>
                    <li>Maintain separate build environments</li>
                    <li>Use fresh containers for production builds</li>
                    <li>Implement build artifact cleanup policies</li>
                </ul>
            </section>
        </main>

    <footer>
        <p>&copy; 2025 Securaa Platform. All rights reserved.</p>
    </footer>
    
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.9.4/dist/mermaid.min.js"></script>
    <script>
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            themeVariables: {
                primaryColor: '#1976d2',
                primaryTextColor: '#000000',
                primaryBorderColor: '#0d47a1',
                lineColor: '#1976d2',
                secondaryColor: '#f5f5f5',
                tertiaryColor: '#ffffff'
            }
        });
    </script>
    <script src="assets/js/documentation.js"></script>
</body>
</html>